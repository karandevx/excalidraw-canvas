{"ast":null,"code":"import { unstable_batchedUpdates } from \"react-dom\";\nexport const throttleRAF = (fn, opts) => {\n  let timerId = null;\n  let lastArgs = null;\n  let lastArgsTrailing = null;\n  const scheduleFunc = args => {\n    timerId = window.requestAnimationFrame(() => {\n      timerId = null;\n      fn(...args);\n      lastArgs = null;\n      if (lastArgsTrailing) {\n        lastArgs = lastArgsTrailing;\n        lastArgsTrailing = null;\n        scheduleFunc(lastArgs);\n      }\n    });\n  };\n  const ret = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    if (process.env.NODE_ENV === \"test\") {\n      fn(...args);\n      return;\n    }\n    lastArgs = args;\n    if (timerId === null) {\n      scheduleFunc(lastArgs);\n    } else if (opts !== null && opts !== void 0 && opts.trailing) {\n      lastArgsTrailing = args;\n    }\n  };\n  ret.flush = () => {\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n    if (lastArgs) {\n      fn(...(lastArgsTrailing || lastArgs));\n      lastArgs = lastArgsTrailing = null;\n    }\n  };\n  ret.cancel = () => {\n    lastArgs = lastArgsTrailing = null;\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n  };\n  return ret;\n};\nexport const withBatchedUpdates = func => event => {\n  unstable_batchedUpdates(func, event);\n};\nexport const withBatchedUpdatesThrottled = func => {\n  // @ts-ignore\n  return throttleRAF(event => {\n    unstable_batchedUpdates(func, event);\n  });\n};\nexport const distance2d = (x1, y1, x2, y2) => {\n  const xd = x2 - x1;\n  const yd = y2 - y1;\n  return Math.hypot(xd, yd);\n};\nexport const resolvablePromise = () => {\n  let resolve;\n  let reject;\n  const promise = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  promise.resolve = resolve;\n  promise.reject = reject;\n  return promise;\n};","map":{"version":3,"names":["unstable_batchedUpdates","throttleRAF","fn","opts","timerId","lastArgs","lastArgsTrailing","scheduleFunc","args","window","requestAnimationFrame","ret","_len","arguments","length","Array","_key","process","env","NODE_ENV","trailing","flush","cancelAnimationFrame","cancel","withBatchedUpdates","func","event","withBatchedUpdatesThrottled","distance2d","x1","y1","x2","y2","xd","yd","Math","hypot","resolvablePromise","resolve","reject","promise","Promise","_resolve","_reject"],"sources":["/Users/karandesai/Downloads/excalidraw/src/utils.ts"],"sourcesContent":["import { ResolvablePromise } from \"@excalidraw/excalidraw/types/utils\";\nimport { unstable_batchedUpdates } from \"react-dom\";\n\nexport const throttleRAF = <T extends any[]>(\n  fn: (...args: T) => void,\n  opts?: { trailing?: boolean }\n) => {\n  let timerId: number | null = null;\n  let lastArgs: T | null = null;\n  let lastArgsTrailing: T | null = null;\n\n  const scheduleFunc = (args: T) => {\n    timerId = window.requestAnimationFrame(() => {\n      timerId = null;\n      fn(...args);\n      lastArgs = null;\n      if (lastArgsTrailing) {\n        lastArgs = lastArgsTrailing;\n        lastArgsTrailing = null;\n        scheduleFunc(lastArgs);\n      }\n    });\n  };\n\n  const ret = (...args: T) => {\n    if (process.env.NODE_ENV === \"test\") {\n      fn(...args);\n      return;\n    }\n    lastArgs = args;\n    if (timerId === null) {\n      scheduleFunc(lastArgs);\n    } else if (opts?.trailing) {\n      lastArgsTrailing = args;\n    }\n  };\n  ret.flush = () => {\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n    if (lastArgs) {\n      fn(...(lastArgsTrailing || lastArgs));\n      lastArgs = lastArgsTrailing = null;\n    }\n  };\n  ret.cancel = () => {\n    lastArgs = lastArgsTrailing = null;\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n  };\n  return ret;\n};\n\nexport const withBatchedUpdates = <\n  TFunction extends ((event: any) => void) | (() => void)\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never\n) =>\n  ((event) => {\n    unstable_batchedUpdates(func as TFunction, event);\n  }) as TFunction;\n\nexport const withBatchedUpdatesThrottled = <\n  TFunction extends ((event: any) => void) | (() => void)\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never\n) => {\n  // @ts-ignore\n  return throttleRAF<Parameters<TFunction>>(((event) => {\n    unstable_batchedUpdates(func, event);\n  }) as TFunction);\n};\n\nexport const distance2d = (x1: number, y1: number, x2: number, y2: number) => {\n  const xd = x2 - x1;\n  const yd = y2 - y1;\n  return Math.hypot(xd, yd);\n};\n\nexport const resolvablePromise = () => {\n  let resolve!: any;\n  let reject!: any;\n  const promise = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  (promise as any).resolve = resolve;\n  (promise as any).reject = reject;\n  return promise as ResolvablePromise<any>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/karandesai/Downloads/excalidraw/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { exportToClipboard, Excalidraw, useHandleLibrary, MIME_TYPES, sceneCoordsToViewportCoords, viewportCoordsToSceneCoords, restoreElements, LiveCollaborationTrigger, MainMenu } from \"@excalidraw/excalidraw\";\nimport ExampleSidebar from \"./sidebar/ExampleSidebar\";\nimport \"./App.scss\";\nimport initialData from \"./initialData\";\nimport { nanoid } from \"nanoid\";\nimport MobileFooter from \"./MobileFooter\";\nimport { resolvablePromise, withBatchedUpdates, withBatchedUpdatesThrottled, distance2d } from \"./utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// This is so that we use the bundled excalidraw.development.js file instead\n// of the actual source code\nconst COMMENT_ICON_DIMENSION = 32;\nconst COMMENT_INPUT_HEIGHT = 50;\nconst COMMENT_INPUT_WIDTH = 150;\nexport default function App() {\n  _s();\n  var _pointerData$pointer$, _pointerData$pointer$2;\n  const appRef = useRef(null);\n  const [viewModeEnabled, setViewModeEnabled] = useState(false);\n  const [drop, setDrop] = useState(false);\n  const [zenModeEnabled, setZenModeEnabled] = useState(false);\n  const [gridModeEnabled, setGridModeEnabled] = useState(false);\n  const [blobUrl, setBlobUrl] = useState(\"\");\n  const [canvasUrl, setCanvasUrl] = useState(\"\");\n  const [exportWithDarkMode, setExportWithDarkMode] = useState(false);\n  const [exportEmbedScene, setExportEmbedScene] = useState(false);\n  const [theme, setTheme] = useState(\"light\");\n  const [isCollaborating, setIsCollaborating] = useState(false);\n  const [commentIcons, setCommentIcons] = useState({});\n  const [comment, setComment] = useState(null);\n  const initialStatePromiseRef = useRef({\n    promise: null\n  });\n  if (!initialStatePromiseRef.current.promise) {\n    initialStatePromiseRef.current.promise = resolvablePromise();\n  }\n  const [excalidrawAPI, setExcalidrawAPI] = useState(null);\n  useHandleLibrary({\n    excalidrawAPI\n  });\n  const fetchData = async imagesrc => {\n    console.log(\"imagesrc f\", imagesrc);\n    const res = await fetch(imagesrc.length > 0 ? imagesrc : \"/rocket.jpeg\");\n    console.log(\"fetch\", res);\n    const imageData = await res.blob();\n    const reader = new FileReader();\n    reader.readAsDataURL(imageData);\n    reader.onload = function () {\n      const imagesArray = [{\n        id: \"rockettt\",\n        dataURL: reader.result,\n        mimeType: MIME_TYPES.jpg,\n        created: 1644915140367,\n        lastRetrieved: 1644915140367\n      }];\n\n      //@ts-ignore\n      // initialStatePromiseRef.current.promise.resolve(initialData);\n      initialStatePromiseRef.current.promise.resolve(initialData);\n      console.log(\"initialStatePromiseRef\", initialStatePromiseRef);\n      excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.addFiles(imagesArray);\n    };\n  };\n  useEffect(() => {\n    if (!excalidrawAPI) {\n      return;\n    }\n    fetchData(\"\");\n  }, [excalidrawAPI]);\n  const renderTopRightUI = isMobile => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [!isMobile && /*#__PURE__*/_jsxDEV(LiveCollaborationTrigger, {\n        isCollaborating: isCollaborating,\n        onSelect: () => {\n          window.alert(\"Collab dialog clicked\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => alert(\"This is dummy top right UI\"),\n        style: {\n          height: \"2.5rem\"\n        },\n        children: [\" \", \"Click me\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n  const updateScene = () => {\n    // const sceneData = {\n    //   // elements: restoreElements([], null),\n    //   appState: {\n    //       viewBackgroundColor: \"./rocket.jpeg\"\n    //   },\n    // };\n    const backgroundImageElement = {\n      type: \"image\",\n      id: \"backgroundImage\",\n      x: 0,\n      y: 0,\n      width: excalidrawAPI.getAppState().width,\n      height: excalidrawAPI.getAppState().height,\n      image: {\n        src: \"../\",\n        crossOrigin: \"anonymous\" // If your image is hosted on a different domain\n      }\n    };\n\n    const sceneData = {\n      elements: [backgroundImageElement]\n    };\n    excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.updateScene(sceneData);\n  };\n  const onLinkOpen = useCallback((element, event) => {\n    const link = element.link;\n    const {\n      nativeEvent\n    } = event.detail;\n    const isNewTab = nativeEvent.ctrlKey || nativeEvent.metaKey;\n    const isNewWindow = nativeEvent.shiftKey;\n    const isInternalLink = link.startsWith(\"/\") || link.includes(window.location.origin);\n    if (isInternalLink && !isNewTab && !isNewWindow) {\n      // signal that we're handling the redirect ourselves\n      event.preventDefault();\n      // do a custom redirect, such as passing to react-router\n      // ...\n    }\n  }, []);\n  const onCopy = async type => {\n    if (!excalidrawAPI) {\n      return false;\n    }\n    await exportToClipboard({\n      elements: excalidrawAPI.getSceneElements(),\n      appState: excalidrawAPI.getAppState(),\n      files: excalidrawAPI.getFiles(),\n      type\n    });\n    window.alert(\"Copied to clipboard as \".concat(type, \" successfully\"));\n  };\n  const [textElement, setTextElement] = useState(null);\n\n  // ... (existing code)\n\n  const addTextElement = () => {\n    console.log(\"called\");\n    const newTextElement = [{\n      id: \"MB9CSH621UdIKH8MEgOhaM\",\n      type: \"text\",\n      x: 331.83412499999997,\n      y: -441.984625,\n      width: 153,\n      height: 165,\n      angle: 0,\n      strokeColor: \"#000000\",\n      backgroundColor: \"#e64980\",\n      fillStyle: \"solid\",\n      strokeWidth: 1,\n      strokeStyle: \"solid\",\n      roughness: 1,\n      opacity: 100,\n      groupIds: [],\n      strokeSharpness: \"sharp\",\n      seed: 802336758,\n      version: 77,\n      versionNonce: 227885290,\n      isDeleted: false,\n      boundElements: null,\n      updated: 1639729535736,\n      text: \"Hellllllo \\nWorld!!!\\n\\nSticky \\nnotes :)\",\n      fontSize: 20,\n      fontFamily: 1,\n      textAlign: \"center\",\n      verticalAlign: \"middle\",\n      baseline: 118,\n      containerId: \"6sVDp9mCGQTomD9nCg5w1b\",\n      originalText: \"Helllllo World!!!\\n\\nSticky notes :)\",\n      customData: {\n        id: \"text-1\",\n        version: \"1\"\n      }\n    }];\n    const sceneData = {\n      elements: restoreElements(newTextElement, null)\n    };\n    console.log(\"sceneData\", sceneData);\n    excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.updateScene(sceneData);\n  };\n  const [pointerData, setPointerData] = useState(null);\n  const onPointerDown = (activeTool, pointerDownState) => {\n    if (activeTool.type === \"custom\" && activeTool.customType === \"comment\") {\n      const {\n        x,\n        y\n      } = pointerDownState.origin;\n      setComment({\n        x,\n        y,\n        value: \"\"\n      });\n    }\n  };\n  const rerenderCommentIcons = () => {\n    if (!excalidrawAPI) {\n      return false;\n    }\n    const commentIconsElements = appRef.current.querySelectorAll(\".comment-icon\");\n    commentIconsElements.forEach(ele => {\n      const id = ele.id;\n      const appstate = excalidrawAPI.getAppState();\n      const {\n        x,\n        y\n      } = sceneCoordsToViewportCoords({\n        sceneX: commentIcons[id].x,\n        sceneY: commentIcons[id].y\n      }, appstate);\n      ele.style.left = \"\".concat(x - COMMENT_ICON_DIMENSION / 2 - appstate.offsetLeft, \"px\");\n      ele.style.top = \"\".concat(y - COMMENT_ICON_DIMENSION / 2 - appstate.offsetTop, \"px\");\n    });\n  };\n  const onPointerMoveFromPointerDownHandler = pointerDownState => {\n    return withBatchedUpdatesThrottled(event => {\n      if (!excalidrawAPI) {\n        return false;\n      }\n      const {\n        x,\n        y\n      } = viewportCoordsToSceneCoords({\n        clientX: event.clientX - pointerDownState.hitElementOffsets.x,\n        clientY: event.clientY - pointerDownState.hitElementOffsets.y\n      }, excalidrawAPI.getAppState());\n      setCommentIcons({\n        ...commentIcons,\n        [pointerDownState.hitElement.id]: {\n          ...commentIcons[pointerDownState.hitElement.id],\n          x,\n          y\n        }\n      });\n    });\n  };\n  const onPointerUpFromPointerDownHandler = pointerDownState => {\n    return withBatchedUpdates(event => {\n      window.removeEventListener(\"pointermove\", pointerDownState.onMove);\n      window.removeEventListener(\"pointerup\", pointerDownState.onUp);\n      excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.setActiveTool({\n        type: \"selection\"\n      });\n      const distance = distance2d(pointerDownState.x, pointerDownState.y, event.clientX, event.clientY);\n      if (distance === 0) {\n        if (!comment) {\n          setComment({\n            x: pointerDownState.hitElement.x + 60,\n            y: pointerDownState.hitElement.y,\n            value: pointerDownState.hitElement.value,\n            id: pointerDownState.hitElement.id\n          });\n        } else {\n          setComment(null);\n        }\n      }\n    });\n  };\n  const saveComment = () => {\n    if (!comment) {\n      return;\n    }\n    if (!comment.id && !comment.value) {\n      setComment(null);\n      return;\n    }\n    const id = comment.id || nanoid();\n    setCommentIcons({\n      ...commentIcons,\n      [id]: {\n        x: comment.id ? comment.x - 60 : comment.x,\n        y: comment.y,\n        id,\n        value: comment.value\n      }\n    });\n    setComment(null);\n  };\n  const renderCommentIcons = () => {\n    return Object.values(commentIcons).map(commentIcon => {\n      if (!excalidrawAPI) {\n        return false;\n      }\n      const appState = excalidrawAPI.getAppState();\n      const {\n        x,\n        y\n      } = sceneCoordsToViewportCoords({\n        sceneX: commentIcon.x,\n        sceneY: commentIcon.y\n      }, excalidrawAPI.getAppState());\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: commentIcon.id,\n        style: {\n          top: \"\".concat(y - COMMENT_ICON_DIMENSION / 2 - appState.offsetTop, \"px\"),\n          left: \"\".concat(x - COMMENT_ICON_DIMENSION / 2 - appState.offsetLeft, \"px\"),\n          position: \"absolute\",\n          zIndex: 1,\n          width: \"\".concat(COMMENT_ICON_DIMENSION, \"px\"),\n          height: \"\".concat(COMMENT_ICON_DIMENSION, \"px\"),\n          cursor: \"pointer\",\n          touchAction: \"none\"\n        },\n        className: \"comment-icon\",\n        onPointerDown: event => {\n          event.preventDefault();\n          if (comment) {\n            commentIcon.value = comment.value;\n            saveComment();\n          }\n          const pointerDownState = {\n            x: event.clientX,\n            y: event.clientY,\n            hitElement: commentIcon,\n            hitElementOffsets: {\n              x: event.clientX - x,\n              y: event.clientY - y\n            }\n          };\n          const onPointerMove = onPointerMoveFromPointerDownHandler(pointerDownState);\n          const onPointerUp = onPointerUpFromPointerDownHandler(pointerDownState);\n          window.addEventListener(\"pointermove\", onPointerMove);\n          window.addEventListener(\"pointerup\", onPointerUp);\n          pointerDownState.onMove = onPointerMove;\n          pointerDownState.onUp = onPointerUp;\n          excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.setActiveTool({\n            type: \"custom\",\n            customType: \"comment\"\n          });\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-avatar\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"doremon.png\",\n            alt: \"doremon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)\n      }, commentIcon.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  const renderComment = () => {\n    if (!comment) {\n      return null;\n    }\n    const appState = excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.getAppState();\n    const {\n      x,\n      y\n    } = sceneCoordsToViewportCoords({\n      sceneX: comment.x,\n      sceneY: comment.y\n    }, appState);\n    let top = y - COMMENT_ICON_DIMENSION / 2 - appState.offsetTop;\n    let left = x - COMMENT_ICON_DIMENSION / 2 - appState.offsetLeft;\n    if (top + COMMENT_INPUT_HEIGHT < appState.offsetTop + COMMENT_INPUT_HEIGHT) {\n      top = COMMENT_ICON_DIMENSION / 2;\n    }\n    if (top + COMMENT_INPUT_HEIGHT > appState.height) {\n      top = appState.height - COMMENT_INPUT_HEIGHT - COMMENT_ICON_DIMENSION / 2;\n    }\n    if (left + COMMENT_INPUT_WIDTH < appState.offsetLeft + COMMENT_INPUT_WIDTH) {\n      left = COMMENT_ICON_DIMENSION / 2;\n    }\n    if (left + COMMENT_INPUT_WIDTH > appState.width) {\n      left = appState.width - COMMENT_INPUT_WIDTH - COMMENT_ICON_DIMENSION / 2;\n    }\n    return /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"comment\",\n      style: {\n        top: \"\".concat(top, \"px\"),\n        left: \"\".concat(left, \"px\"),\n        position: \"absolute\",\n        zIndex: 1,\n        height: \"\".concat(COMMENT_INPUT_HEIGHT, \"px\"),\n        width: \"\".concat(COMMENT_INPUT_WIDTH, \"px\")\n      },\n      ref: ref => {\n        setTimeout(() => ref === null || ref === void 0 ? void 0 : ref.focus());\n      },\n      placeholder: comment.value ? \"Reply\" : \"Comment\",\n      value: comment.value,\n      onChange: event => {\n        setComment({\n          ...comment,\n          value: event.target.value\n        });\n      },\n      onBlur: saveComment,\n      onKeyDown: event => {\n        if (!event.shiftKey && event.key === \"Enter\") {\n          event.preventDefault();\n          saveComment();\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSidebar = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n    // <Sidebar>\n    //   <Sidebar.Header>Custom header!</Sidebar.Header>\n    //   Custom sidebar!\n    // </Sidebar>\n    ;\n  };\n\n  //   const handleDrop = useCallback(\n\n  //     async (event: React.DragEvent<HTMLDivElement>) => {\n  //       event.preventDefault();\n  //       console.log(\"func call\");\n  //       const files = event.dataTransfer.files;\n  //       console.log(\"func files\",files);\n  //       if (files.length > 0) {\n  //         const file = files[0];\n\n  //         if (file.type.startsWith(\"image/\")) {\n  //           const reader = new FileReader();\n  //           reader.readAsDataURL(file);\n\n  //           reader.onload = function () {\n  //             const imagesArray: BinaryFileData[] = [\n  //               {\n  //                 id: file.name as any, // Type assertion here\n  //                 dataURL: reader.result as BinaryFileData[\"dataURL\"],\n  //                 mimeType: file.type as any,\n  //                 created: Date.now(),\n  //                 lastRetrieved: Date.now(),\n  //               },\n  //             ];\n  // console.log(\"imagesArray\",imagesArray)\n  //             // Add the image to the Excalidraw canvas\n  //             excalidrawAPI?.addFiles(imagesArray);\n  //           };\n  //         }\n  //       }\n  //     },\n  //     [excalidrawAPI,drop]\n  //   );\n\n  //   useEffect(() => {\n  //     const canvasWrapper = appRef.current.querySelector(\".excalidraw-wrapper\");\n  //     console.log(\"effect\");\n  //     // Listen for drop events on the canvas\n  //     canvasWrapper.addEventListener(\"drop\", handleDrop);\n\n  //     // Prevent default behavior for drag-and-drop to allow dropping files\n  //     canvasWrapper.addEventListener(\"dragover\", (event: any) => {\n  //       event.preventDefault();\n  //     });\n\n  //     // Cleanup event listeners on component unmount\n  //     return () => {\n  //       canvasWrapper.removeEventListener(\"drop\", handleDrop);\n  //       canvasWrapper.removeEventListener(\"dragover\", (event: any) => {\n  //         event.preventDefault();\n  //       });\n  //     };\n  //   }, [handleDrop]);\n  const handleImageDragStart = event => {\n    // Customize the drag data to include necessary information\n    const imageSrc = event.currentTarget.src;\n    console.log(\"imageSrc\", imageSrc);\n    event.dataTransfer.setData(\"text/plain\", imageSrc);\n    fetchData(imageSrc);\n    setDrop(true);\n  };\n  const handleRightSideDivDrop = async imageSrc => {\n    // event.preventDefault();\n    //const imageSrc = event.dataTransfer.getData(\"text/plain\");\n\n    const response = await fetch(imageSrc);\n    const blob = await response.blob();\n    console.log(\"imageSrcc drag\", blob);\n    const reader = new FileReader();\n    reader.readAsDataURL(blob);\n    reader.onload = function () {\n      const imagesArray = [{\n        id: \"image_\".concat(Date.now()),\n        dataURL: reader.result,\n        mimeType: \"image/png\",\n        created: Date.now(),\n        lastRetrieved: Date.now()\n      }];\n      console.log(\"imagesArraydrag\", imagesArray);\n      console.log(\"Elements before adding file:\", excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.getSceneElements());\n      excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.addFiles(imagesArray);\n      console.log(\"Elements after adding file:\", excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.getSceneElements());\n\n      //setDrop(false)\n    };\n  };\n  // ... (rest of the existing code)\n\n  const renderMenu = () => {\n    return /*#__PURE__*/_jsxDEV(MainMenu, {\n      children: [/*#__PURE__*/_jsxDEV(MainMenu.DefaultItems.SaveAsImage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.DefaultItems.Export, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.Group, {\n        title: \"Excalidraw links\",\n        children: /*#__PURE__*/_jsxDEV(MainMenu.DefaultItems.Socials, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.ItemCustom, {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            height: \"2rem\"\n          },\n          onClick: () => window.alert(\"custom menu item\"),\n          children: \"custom item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainMenu.DefaultItems.Help, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this), excalidrawAPI && /*#__PURE__*/_jsxDEV(MobileFooter, {\n        excalidrawAPI: excalidrawAPI\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    ref: appRef,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"HTML canvas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ExampleSidebar, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"update-scene\",\n          onClick: updateScene,\n          children: \"Update Canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"reset-scene\",\n          onClick: () => {\n            excalidrawAPI === null || excalidrawAPI === void 0 ? void 0 : excalidrawAPI.resetScene();\n          },\n          children: \"Reset Canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: viewModeEnabled,\n            onChange: () => setViewModeEnabled(!viewModeEnabled)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 13\n          }, this), \"View mode\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: gridModeEnabled,\n            onChange: () => setGridModeEnabled(!gridModeEnabled)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 13\n          }, this), \"Grid mode\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: theme === \"dark\",\n            onChange: () => {\n              let newTheme = \"light\";\n              if (theme === \"light\") {\n                newTheme = \"dark\";\n              }\n              setTheme(newTheme);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, this), \"Switch to Dark Theme\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onCopy.bind(null, \"png\"),\n          children: \"Copy to Clipboard as PNG\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onCopy.bind(null, \"svg\"),\n          children: \"Copy to Clipboard as SVG\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onCopy.bind(null, \"json\"),\n          children: \"Copy to Clipboard as JSON\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"1em\",\n            justifyContent: \"center\",\n            marginTop: \"1em\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"x: \", (_pointerData$pointer$ = pointerData === null || pointerData === void 0 ? void 0 : pointerData.pointer.x) !== null && _pointerData$pointer$ !== void 0 ? _pointerData$pointer$ : 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"y: \", (_pointerData$pointer$2 = pointerData === null || pointerData === void 0 ? void 0 : pointerData.pointer.y) !== null && _pointerData$pointer$2 !== void 0 ? _pointerData$pointer$2 : 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"parentDiv\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"excalidraw-wrapper\",\n          onDrop: event => {\n            // handleDrop(event);\n\n            console.log(\"droppp\");\n          },\n          onDragOver: event => event.preventDefault(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"absolute\",\n              left: \"50%\",\n              bottom: \"20px\",\n              display: \"flex\",\n              zIndex: 9999999999999999,\n              padding: \"5px 10px\",\n              transform: \"translateX(-50%)\",\n              background: \"rgba(255, 255, 255, 0.8)\",\n              gap: \"1rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Excalidraw, {\n            ref: api => setExcalidrawAPI(api),\n            initialData: initialStatePromiseRef.current.promise,\n            onChange: (elements, state) => {\n              console.info(\"Elements :\", elements, \"State : \", state);\n            },\n            onPointerUpdate: payload => setPointerData(payload),\n            viewModeEnabled: viewModeEnabled,\n            zenModeEnabled: zenModeEnabled,\n            gridModeEnabled: gridModeEnabled,\n            theme: theme,\n            name: \"Custom name of drawing\",\n            UIOptions: {\n              canvasActions: {\n                loadScene: false\n              }\n            }\n            // renderTopRightUI={renderTopRightUI}\n            ,\n            onLinkOpen: onLinkOpen,\n            onPointerDown: onPointerDown,\n            onScrollChange: rerenderCommentIcons\n            // renderSidebar={renderSidebar}\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 13\n          }, this), Object.keys(commentIcons || []).length > 0 && renderCommentIcons(), comment && renderComment()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onDrop: handleRightSideDivDrop,\n          onDragOver: event => event.preventDefault(),\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n            onDragStart: handleImageDragStart,\n            src: \"messi.png\",\n            alt: \"messi\",\n            style: {\n              height: \"200px\",\n              width: \"240px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          background: \"/rocket.jpeg\"\n        },\n        onClick: addTextElement,\n        children: \"Add Text Element\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 640,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"CJ1s+soTqD3WFhAJIPiUGFembbQ=\", false, function () {\n  return [useHandleLibrary];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","exportToClipboard","Excalidraw","useHandleLibrary","MIME_TYPES","sceneCoordsToViewportCoords","viewportCoordsToSceneCoords","restoreElements","LiveCollaborationTrigger","MainMenu","ExampleSidebar","initialData","nanoid","MobileFooter","resolvablePromise","withBatchedUpdates","withBatchedUpdatesThrottled","distance2d","jsxDEV","_jsxDEV","Fragment","_Fragment","COMMENT_ICON_DIMENSION","COMMENT_INPUT_HEIGHT","COMMENT_INPUT_WIDTH","App","_s","_pointerData$pointer$","_pointerData$pointer$2","appRef","viewModeEnabled","setViewModeEnabled","drop","setDrop","zenModeEnabled","setZenModeEnabled","gridModeEnabled","setGridModeEnabled","blobUrl","setBlobUrl","canvasUrl","setCanvasUrl","exportWithDarkMode","setExportWithDarkMode","exportEmbedScene","setExportEmbedScene","theme","setTheme","isCollaborating","setIsCollaborating","commentIcons","setCommentIcons","comment","setComment","initialStatePromiseRef","promise","current","excalidrawAPI","setExcalidrawAPI","fetchData","imagesrc","console","log","res","fetch","length","imageData","blob","reader","FileReader","readAsDataURL","onload","imagesArray","id","dataURL","result","mimeType","jpg","created","lastRetrieved","resolve","addFiles","renderTopRightUI","isMobile","children","onSelect","window","alert","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","height","updateScene","backgroundImageElement","type","x","y","width","getAppState","image","src","crossOrigin","sceneData","elements","onLinkOpen","element","event","link","nativeEvent","detail","isNewTab","ctrlKey","metaKey","isNewWindow","shiftKey","isInternalLink","startsWith","includes","location","origin","preventDefault","onCopy","getSceneElements","appState","files","getFiles","concat","textElement","setTextElement","addTextElement","newTextElement","angle","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","groupIds","strokeSharpness","seed","version","versionNonce","isDeleted","boundElements","updated","text","fontSize","fontFamily","textAlign","verticalAlign","baseline","containerId","originalText","customData","pointerData","setPointerData","onPointerDown","activeTool","pointerDownState","customType","value","rerenderCommentIcons","commentIconsElements","querySelectorAll","forEach","ele","appstate","sceneX","sceneY","left","offsetLeft","top","offsetTop","onPointerMoveFromPointerDownHandler","clientX","hitElementOffsets","clientY","hitElement","onPointerUpFromPointerDownHandler","removeEventListener","onMove","onUp","setActiveTool","distance","saveComment","renderCommentIcons","Object","values","map","commentIcon","position","zIndex","cursor","touchAction","className","onPointerMove","onPointerUp","addEventListener","alt","renderComment","ref","setTimeout","focus","placeholder","onChange","target","onBlur","onKeyDown","key","renderSidebar","handleImageDragStart","imageSrc","currentTarget","dataTransfer","setData","handleRightSideDivDrop","response","Date","now","renderMenu","DefaultItems","SaveAsImage","Export","Separator","Group","title","Socials","ItemCustom","Help","resetScene","checked","newTheme","bind","display","gap","justifyContent","marginTop","pointer","onDrop","onDragOver","bottom","padding","transform","background","api","state","info","onPointerUpdate","payload","name","UIOptions","canvasActions","loadScene","onScrollChange","keys","onDragStart","_c","$RefreshReg$"],"sources":["/Users/karandesai/Downloads/excalidraw/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport dore from \"../public/doremon.png\";\nimport {\n  exportToCanvas,\n  exportToSvg,\n  exportToBlob,\n  exportToClipboard,\n  Excalidraw,\n  useHandleLibrary,\n  MIME_TYPES,\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n  restoreElements,\n  LiveCollaborationTrigger,\n  MainMenu,\n  Footer,\n  Sidebar,\n} from \"@excalidraw/excalidraw\";\nimport {\n  AppState,\n  BinaryFileData,\n  ExcalidrawImperativeAPI,\n  ExcalidrawInitialDataState,\n  Gesture,\n  LibraryItems,\n  PointerDownState as ExcalidrawPointerDownState,\n} from \"@excalidraw/excalidraw/types/types\";\n\nimport ExampleSidebar from \"./sidebar/ExampleSidebar\";\n\nimport \"./App.scss\";\nimport initialData from \"./initialData\";\n\nimport { NonDeletedExcalidrawElement } from \"@excalidraw/excalidraw/types/element/types\";\nimport { nanoid } from \"nanoid\";\nimport CustomFooter from \"./CustomFooter\";\nimport MobileFooter from \"./MobileFooter\";\nimport {\n  resolvablePromise,\n  withBatchedUpdates,\n  withBatchedUpdatesThrottled,\n  distance2d,\n} from \"./utils\";\nimport { ResolvablePromise } from \"@excalidraw/excalidraw/types/utils\";\n\ndeclare global {\n  interface Window {\n    ExcalidrawLib: any;\n  }\n}\n\ntype Comment = {\n  x: number;\n  y: number;\n  value: string;\n  id?: string;\n};\n\ntype PointerDownState = {\n  x: number;\n  y: number;\n  hitElement: Comment;\n  onMove: any;\n  onUp: any;\n  hitElementOffsets: {\n    x: number;\n    y: number;\n  };\n};\n// This is so that we use the bundled excalidraw.development.js file instead\n// of the actual source code\n\nconst COMMENT_ICON_DIMENSION = 32;\nconst COMMENT_INPUT_HEIGHT = 50;\nconst COMMENT_INPUT_WIDTH = 150;\n\nexport default function App() {\n  const appRef = useRef<any>(null);\n  const [viewModeEnabled, setViewModeEnabled] = useState(false);\n  const [drop, setDrop] = useState(false);\n  const [zenModeEnabled, setZenModeEnabled] = useState(false);\n  const [gridModeEnabled, setGridModeEnabled] = useState(false);\n  const [blobUrl, setBlobUrl] = useState<string>(\"\");\n  const [canvasUrl, setCanvasUrl] = useState<string>(\"\");\n  const [exportWithDarkMode, setExportWithDarkMode] = useState(false);\n  const [exportEmbedScene, setExportEmbedScene] = useState(false);\n  const [theme, setTheme] = useState(\"light\");\n  const [isCollaborating, setIsCollaborating] = useState(false);\n  const [commentIcons, setCommentIcons] = useState<{ [id: string]: Comment }>(\n    {}\n  );\n  const [comment, setComment] = useState<Comment | null>(null);\n\n  const initialStatePromiseRef = useRef<{\n    promise: ResolvablePromise<ExcalidrawInitialDataState | null>;\n  }>({ promise: null! });\n  if (!initialStatePromiseRef.current.promise) {\n    initialStatePromiseRef.current.promise = resolvablePromise();\n  }\n\n  const [excalidrawAPI, setExcalidrawAPI] =\n    useState<ExcalidrawImperativeAPI | null>(null);\n\n  useHandleLibrary({ excalidrawAPI });\n\n  const fetchData = async (imagesrc:any) => {\n    console.log(\"imagesrc f\",imagesrc)\n    const res = await fetch(imagesrc.length>0 ?imagesrc:\"/rocket.jpeg\");\n    console.log(\"fetch\",res)\n    const imageData = await res.blob();\n    const reader = new FileReader();\n    reader.readAsDataURL(imageData);\n\n    reader.onload = function () {\n      const imagesArray: BinaryFileData[] = [\n        {\n          id: \"rockettt\" as BinaryFileData[\"id\"],\n          dataURL: reader.result as BinaryFileData[\"dataURL\"],\n          mimeType: MIME_TYPES.jpg,\n          created: 1644915140367,\n          lastRetrieved: 1644915140367,\n        },\n      ];\n\n      //@ts-ignore\n     // initialStatePromiseRef.current.promise.resolve(initialData);\n     initialStatePromiseRef.current.promise.resolve(initialData);\n      console.log(\"initialStatePromiseRef\",initialStatePromiseRef)\n      excalidrawAPI?.addFiles(imagesArray);\n    };\n  };\n  useEffect(() => {\n    if (!excalidrawAPI) {\n      return;\n    }\n\n    fetchData(\"\");\n   \n  }, [excalidrawAPI]);\n\n  const renderTopRightUI = (isMobile: boolean) => {\n    return (\n      <>\n        {!isMobile && (\n          <LiveCollaborationTrigger\n            isCollaborating={isCollaborating}\n            onSelect={() => {\n              window.alert(\"Collab dialog clicked\");\n            }}\n          />\n        )}\n        <button\n          onClick={() => alert(\"This is dummy top right UI\")}\n          style={{ height: \"2.5rem\" }}\n        >\n          {\" \"}\n          Click me{\" \"}\n        </button>\n      </>\n    );\n  };\n\n  const updateScene = () => {\n    // const sceneData = {\n    //   // elements: restoreElements([], null),\n    //   appState: {\n    //       viewBackgroundColor: \"./rocket.jpeg\"\n    //   },\n    // };\n    const backgroundImageElement = {\n      type: \"image\",\n      id: \"backgroundImage\",\n      x: 0,\n      y: 0,\n      width: excalidrawAPI!.getAppState().width,\n      height: excalidrawAPI!.getAppState().height,\n      image: {\n        src: \"../\",\n        crossOrigin: \"anonymous\", // If your image is hosted on a different domain\n      },\n    };\n    const sceneData = {\n      elements: [backgroundImageElement],\n    };\n  \n    excalidrawAPI?.updateScene(sceneData as any);\n  };\n\n  const onLinkOpen = useCallback(\n    (\n      element: NonDeletedExcalidrawElement,\n      event: CustomEvent<{\n        nativeEvent: MouseEvent | React.PointerEvent<HTMLCanvasElement>;\n      }>\n    ) => {\n      const link = element.link!;\n      const { nativeEvent } = event.detail;\n      const isNewTab = nativeEvent.ctrlKey || nativeEvent.metaKey;\n      const isNewWindow = nativeEvent.shiftKey;\n      const isInternalLink =\n        link.startsWith(\"/\") || link.includes(window.location.origin);\n      if (isInternalLink && !isNewTab && !isNewWindow) {\n        // signal that we're handling the redirect ourselves\n        event.preventDefault();\n        // do a custom redirect, such as passing to react-router\n        // ...\n      }\n    },\n    []\n  );\n\n  const onCopy = async (type: \"png\" | \"svg\" | \"json\") => {\n    if (!excalidrawAPI) {\n      return false;\n    }\n    await exportToClipboard({\n      elements: excalidrawAPI.getSceneElements(),\n      appState: excalidrawAPI.getAppState(),\n      files: excalidrawAPI.getFiles(),\n      type,\n    });\n    window.alert(`Copied to clipboard as ${type} successfully`);\n  };\n  const [textElement, setTextElement] = useState<Comment | null>(null);\n\n  // ... (existing code)\n\n  const addTextElement = () => {\n   console.log(\"called\")\n      const newTextElement: any =   [ {\n        id: \"MB9CSH621UdIKH8MEgOhaM\",\n        type: \"text\",\n        x: 331.83412499999997,\n        y: -441.984625,\n        width: 153,\n        height: 165,\n        angle: 0,\n        strokeColor: \"#000000\",\n        backgroundColor: \"#e64980\",\n        fillStyle: \"solid\",\n        strokeWidth: 1,\n        strokeStyle: \"solid\",\n        roughness: 1,\n        opacity: 100,\n        groupIds: [],\n        strokeSharpness: \"sharp\",\n        seed: 802336758,\n        version: 77,\n        versionNonce: 227885290,\n        isDeleted: false,\n        boundElements: null,\n        updated: 1639729535736,\n        text: \"Hellllllo \\nWorld!!!\\n\\nSticky \\nnotes :)\",\n        fontSize: 20,\n        fontFamily: 1,\n        textAlign: \"center\",\n        verticalAlign: \"middle\",\n        baseline: 118,\n        containerId: \"6sVDp9mCGQTomD9nCg5w1b\",\n        originalText: \"Helllllo World!!!\\n\\nSticky notes :)\",\n        customData: {\n          id: \"text-1\",\n          version: \"1\"\n        }\n      }]\n      const sceneData = {\n        elements: restoreElements(newTextElement,null),\n      };\n      console.log(\"sceneData\",sceneData)\n  \n      excalidrawAPI?.updateScene(sceneData as any);\n    \n  };\n  const [pointerData, setPointerData] = useState<{\n    pointer: { x: number; y: number };\n    button: \"down\" | \"up\";\n    pointersMap: Gesture[\"pointers\"];\n  } | null>(null);\n\n  const onPointerDown = (\n    activeTool: AppState[\"activeTool\"],\n    pointerDownState: ExcalidrawPointerDownState\n  ) => {\n    if (activeTool.type === \"custom\" && activeTool.customType === \"comment\") {\n      const { x, y } = pointerDownState.origin;\n      setComment({ x, y, value: \"\" });\n    }\n  };\n\n  const rerenderCommentIcons = () => {\n    if (!excalidrawAPI) {\n      return false;\n    }\n    const commentIconsElements = appRef.current.querySelectorAll(\n      \".comment-icon\"\n    ) as HTMLElement[];\n    commentIconsElements.forEach((ele) => {\n      const id = ele.id;\n      const appstate = excalidrawAPI.getAppState();\n      const { x, y } = sceneCoordsToViewportCoords(\n        { sceneX: commentIcons[id].x, sceneY: commentIcons[id].y },\n        appstate\n      );\n      ele.style.left = `${\n        x - COMMENT_ICON_DIMENSION / 2 - appstate!.offsetLeft\n      }px`;\n      ele.style.top = `${\n        y - COMMENT_ICON_DIMENSION / 2 - appstate!.offsetTop\n      }px`;\n    });\n  };\n\n  const onPointerMoveFromPointerDownHandler = (\n    pointerDownState: PointerDownState\n  ) => {\n    return withBatchedUpdatesThrottled((event) => {\n      if (!excalidrawAPI) {\n        return false;\n      }\n      const { x, y } = viewportCoordsToSceneCoords(\n        {\n          clientX: event.clientX - pointerDownState.hitElementOffsets.x,\n          clientY: event.clientY - pointerDownState.hitElementOffsets.y,\n        },\n        excalidrawAPI.getAppState()\n      );\n      setCommentIcons({\n        ...commentIcons,\n        [pointerDownState.hitElement.id!]: {\n          ...commentIcons[pointerDownState.hitElement.id!],\n          x,\n          y,\n        },\n      });\n    });\n  };\n  const onPointerUpFromPointerDownHandler = (\n    pointerDownState: PointerDownState\n  ) => {\n    return withBatchedUpdates((event) => {\n      window.removeEventListener(\"pointermove\", pointerDownState.onMove);\n      window.removeEventListener(\"pointerup\", pointerDownState.onUp);\n      excalidrawAPI?.setActiveTool({ type: \"selection\" });\n      const distance = distance2d(\n        pointerDownState.x,\n        pointerDownState.y,\n        event.clientX,\n        event.clientY\n      );\n      if (distance === 0) {\n        if (!comment) {\n          setComment({\n            x: pointerDownState.hitElement.x + 60,\n            y: pointerDownState.hitElement.y,\n            value: pointerDownState.hitElement.value,\n            id: pointerDownState.hitElement.id,\n          });\n        } else {\n          setComment(null);\n        }\n      }\n    });\n  };\n  const saveComment = () => {\n    if (!comment) {\n      return;\n    }\n    if (!comment.id && !comment.value) {\n      setComment(null);\n      return;\n    }\n    const id = comment.id || nanoid();\n    setCommentIcons({\n      ...commentIcons,\n      [id]: {\n        x: comment.id ? comment.x - 60 : comment.x,\n        y: comment.y,\n        id,\n        value: comment.value,\n      },\n    });\n    setComment(null);\n  };\n\n  const renderCommentIcons = () => {\n    return Object.values(commentIcons).map((commentIcon) => {\n      if (!excalidrawAPI) {\n        return false;\n      }\n      const appState = excalidrawAPI.getAppState();\n      const { x, y } = sceneCoordsToViewportCoords(\n        { sceneX: commentIcon.x, sceneY: commentIcon.y },\n        excalidrawAPI.getAppState()\n      );\n      return (\n        <div\n          id={commentIcon.id}\n          key={commentIcon.id}\n          style={{\n            top: `${y - COMMENT_ICON_DIMENSION / 2 - appState!.offsetTop}px`,\n            left: `${x - COMMENT_ICON_DIMENSION / 2 - appState!.offsetLeft}px`,\n            position: \"absolute\",\n            zIndex: 1,\n            width: `${COMMENT_ICON_DIMENSION}px`,\n            height: `${COMMENT_ICON_DIMENSION}px`,\n            cursor: \"pointer\",\n            touchAction: \"none\",\n          }}\n          className=\"comment-icon\"\n          onPointerDown={(event) => {\n            event.preventDefault();\n            if (comment) {\n              commentIcon.value = comment.value;\n              saveComment();\n            }\n            const pointerDownState: any = {\n              x: event.clientX,\n              y: event.clientY,\n              hitElement: commentIcon,\n              hitElementOffsets: { x: event.clientX - x, y: event.clientY - y },\n            };\n            const onPointerMove =\n              onPointerMoveFromPointerDownHandler(pointerDownState);\n            const onPointerUp =\n              onPointerUpFromPointerDownHandler(pointerDownState);\n            window.addEventListener(\"pointermove\", onPointerMove);\n            window.addEventListener(\"pointerup\", onPointerUp);\n\n            pointerDownState.onMove = onPointerMove;\n            pointerDownState.onUp = onPointerUp;\n\n            excalidrawAPI?.setActiveTool({\n              type: \"custom\",\n              customType: \"comment\",\n            });\n          }}\n        >\n          <div className=\"comment-avatar\">\n            <img src=\"doremon.png\" alt=\"doremon\" />\n          </div>\n        </div>\n      );\n    });\n  };\n\n  const renderComment = () => {\n    if (!comment) {\n      return null;\n    }\n    const appState = excalidrawAPI?.getAppState()!;\n    const { x, y } = sceneCoordsToViewportCoords(\n      { sceneX: comment.x, sceneY: comment.y },\n      appState\n    );\n    let top = y - COMMENT_ICON_DIMENSION / 2 - appState.offsetTop;\n    let left = x - COMMENT_ICON_DIMENSION / 2 - appState.offsetLeft;\n\n    if (\n      top + COMMENT_INPUT_HEIGHT <\n      appState.offsetTop + COMMENT_INPUT_HEIGHT\n    ) {\n      top = COMMENT_ICON_DIMENSION / 2;\n    }\n    if (top + COMMENT_INPUT_HEIGHT > appState.height) {\n      top = appState.height - COMMENT_INPUT_HEIGHT - COMMENT_ICON_DIMENSION / 2;\n    }\n    if (\n      left + COMMENT_INPUT_WIDTH <\n      appState.offsetLeft + COMMENT_INPUT_WIDTH\n    ) {\n      left = COMMENT_ICON_DIMENSION / 2;\n    }\n    if (left + COMMENT_INPUT_WIDTH > appState.width) {\n      left = appState.width - COMMENT_INPUT_WIDTH - COMMENT_ICON_DIMENSION / 2;\n    }\n\n    return (\n      <textarea\n        className=\"comment\"\n        style={{\n          top: `${top}px`,\n          left: `${left}px`,\n          position: \"absolute\",\n          zIndex: 1,\n          height: `${COMMENT_INPUT_HEIGHT}px`,\n          width: `${COMMENT_INPUT_WIDTH}px`,\n        }}\n        ref={(ref) => {\n          setTimeout(() => ref?.focus());\n        }}\n        placeholder={comment.value ? \"Reply\" : \"Comment\"}\n        value={comment.value}\n        onChange={(event) => {\n          setComment({ ...comment, value: event.target.value });\n        }}\n        onBlur={saveComment}\n        onKeyDown={(event) => {\n          if (!event.shiftKey && event.key === \"Enter\") {\n            event.preventDefault();\n            saveComment();\n          }\n        }}\n      />\n    );\n  };\n\n  const renderSidebar = () => {\n    return (\n      <></>\n      // <Sidebar>\n      //   <Sidebar.Header>Custom header!</Sidebar.Header>\n      //   Custom sidebar!\n      // </Sidebar>\n    );\n  };\n\n//   const handleDrop = useCallback(\n    \n//     async (event: React.DragEvent<HTMLDivElement>) => {\n//       event.preventDefault();\n//       console.log(\"func call\");\n//       const files = event.dataTransfer.files;\n//       console.log(\"func files\",files);\n//       if (files.length > 0) {\n//         const file = files[0];\n\n//         if (file.type.startsWith(\"image/\")) {\n//           const reader = new FileReader();\n//           reader.readAsDataURL(file);\n\n//           reader.onload = function () {\n//             const imagesArray: BinaryFileData[] = [\n//               {\n//                 id: file.name as any, // Type assertion here\n//                 dataURL: reader.result as BinaryFileData[\"dataURL\"],\n//                 mimeType: file.type as any,\n//                 created: Date.now(),\n//                 lastRetrieved: Date.now(),\n//               },\n//             ];\n// console.log(\"imagesArray\",imagesArray)\n//             // Add the image to the Excalidraw canvas\n//             excalidrawAPI?.addFiles(imagesArray);\n//           };\n//         }\n//       }\n//     },\n//     [excalidrawAPI,drop]\n//   );\n\n//   useEffect(() => {\n//     const canvasWrapper = appRef.current.querySelector(\".excalidraw-wrapper\");\n//     console.log(\"effect\");\n//     // Listen for drop events on the canvas\n//     canvasWrapper.addEventListener(\"drop\", handleDrop);\n\n//     // Prevent default behavior for drag-and-drop to allow dropping files\n//     canvasWrapper.addEventListener(\"dragover\", (event: any) => {\n//       event.preventDefault();\n//     });\n\n//     // Cleanup event listeners on component unmount\n//     return () => {\n//       canvasWrapper.removeEventListener(\"drop\", handleDrop);\n//       canvasWrapper.removeEventListener(\"dragover\", (event: any) => {\n//         event.preventDefault();\n//       });\n//     };\n//   }, [handleDrop]);\n  const handleImageDragStart = (event: React.DragEvent<HTMLImageElement>) => {\n    // Customize the drag data to include necessary information\n    const imageSrc = event.currentTarget.src;\n    console.log(\"imageSrc\",imageSrc);\n    event.dataTransfer.setData(\"text/plain\", imageSrc);\n    fetchData(imageSrc);\n    setDrop(true)\n  };\n  const handleRightSideDivDrop = async (imageSrc:any) => {\n   // event.preventDefault();\n    //const imageSrc = event.dataTransfer.getData(\"text/plain\");\n    \n    const response = await fetch(imageSrc);\n  const blob = await response.blob();\n\n    console.log(\"imageSrcc drag\",blob);\n    const reader = new FileReader();\n          reader.readAsDataURL(blob);\n\n          reader.onload = function () {\n            const imagesArray: BinaryFileData[] = [\n              {\n                id: `image_${Date.now()}` as any,\n                dataURL: reader.result as BinaryFileData[\"dataURL\"],\n                mimeType: \"image/png\",\n                created: Date.now(),\n                lastRetrieved: Date.now(),\n              },\n            ];\n            console.log(\"imagesArraydrag\",imagesArray)\n            console.log(\"Elements before adding file:\", excalidrawAPI?.getSceneElements());\n\n            excalidrawAPI?.addFiles(imagesArray);\n            console.log(\"Elements after adding file:\", excalidrawAPI?.getSceneElements());\n\n            //setDrop(false)\n          }\n\n  };\n  // ... (rest of the existing code)\n\n  const renderMenu = () => {\n    return (\n      <MainMenu>\n        <MainMenu.DefaultItems.SaveAsImage />\n        <MainMenu.DefaultItems.Export />\n        <MainMenu.Separator />\n        {/* <MainMenu.DefaultItems.LiveCollaborationTrigger\n          isCollaborating={isCollaborating}\n          onSelect={() => window.alert(\"You clicked on collab button\")}\n        /> */}\n        <MainMenu.Group title=\"Excalidraw links\">\n          <MainMenu.DefaultItems.Socials />\n        </MainMenu.Group>\n        <MainMenu.Separator />\n        <MainMenu.ItemCustom>\n          <button\n            style={{ height: \"2rem\" }}\n            onClick={() => window.alert(\"custom menu item\")}\n          >\n            custom item\n          </button>\n        </MainMenu.ItemCustom>\n        <MainMenu.DefaultItems.Help />\n\n        {excalidrawAPI && <MobileFooter excalidrawAPI={excalidrawAPI} />}\n      </MainMenu>\n    );\n  };\n  return (\n    <div className=\"App\" ref={appRef}>\n      <h1>HTML canvas</h1>\n      <ExampleSidebar>\n        <div className=\"button-wrapper\">\n          <button className=\"update-scene\" onClick={updateScene}>\n            Update Canvas\n          </button>\n          <button\n            className=\"reset-scene\"\n            onClick={() => {\n              excalidrawAPI?.resetScene();\n            }}\n          >\n            Reset Canvas\n          </button>\n\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={viewModeEnabled}\n              onChange={() => setViewModeEnabled(!viewModeEnabled)}\n            />\n            View mode\n          </label>\n          {/* <label>\n            <input\n              type=\"checkbox\"\n              checked={zenModeEnabled}\n              onChange={() => setZenModeEnabled(!zenModeEnabled)}\n            />\n            Zen mode\n          </label> */}\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={gridModeEnabled}\n              onChange={() => setGridModeEnabled(!gridModeEnabled)}\n            />\n            Grid mode\n          </label>\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={theme === \"dark\"}\n              onChange={() => {\n                let newTheme = \"light\";\n                if (theme === \"light\") {\n                  newTheme = \"dark\";\n                }\n                setTheme(newTheme);\n              }}\n            />\n            Switch to Dark Theme\n          </label>\n\n          <button onClick={onCopy.bind(null, \"png\")}>\n            Copy to Clipboard as PNG\n          </button>\n          <button onClick={onCopy.bind(null, \"svg\")}>\n            Copy to Clipboard as SVG\n          </button>\n          <button onClick={onCopy.bind(null, \"json\")}>\n            Copy to Clipboard as JSON\n          </button>\n\n          <div\n            style={{\n              display: \"flex\",\n              gap: \"1em\",\n              justifyContent: \"center\",\n              marginTop: \"1em\",\n            }}\n          >\n            <div>x: {pointerData?.pointer.x ?? 0}</div>\n            <div>y: {pointerData?.pointer.y ?? 0}</div>\n          </div>\n        </div>\n        <div className=\"parentDiv\">\n          <div\n            className=\"excalidraw-wrapper\"\n            onDrop={(event) => {\n             // handleDrop(event);\n\n              console.log(\"droppp\");\n            }}\n            onDragOver={(event) => event.preventDefault()}\n          >\n            <div\n              style={{\n                position: \"absolute\",\n                left: \"50%\",\n                bottom: \"20px\",\n                display: \"flex\",\n                zIndex: 9999999999999999,\n                padding: \"5px 10px\",\n                transform: \"translateX(-50%)\",\n                background: \"rgba(255, 255, 255, 0.8)\",\n                gap: \"1rem\",\n              }}\n            ></div>\n            <Excalidraw\n              ref={(api: ExcalidrawImperativeAPI) => setExcalidrawAPI(api)}\n              initialData={initialStatePromiseRef.current.promise}\n              onChange={(elements, state) => {\n                console.info(\"Elements :\", elements, \"State : \", state);\n              }}\n              onPointerUpdate={(payload: {\n                pointer: { x: number; y: number };\n                button: \"down\" | \"up\";\n                pointersMap: Gesture[\"pointers\"];\n              }) => setPointerData(payload)}\n              viewModeEnabled={viewModeEnabled}\n              zenModeEnabled={zenModeEnabled}\n              gridModeEnabled={gridModeEnabled}\n              theme={theme as any}\n              name=\"Custom name of drawing\"\n              UIOptions={{ canvasActions: { loadScene: false } }}\n              // renderTopRightUI={renderTopRightUI}\n              onLinkOpen={onLinkOpen}\n              onPointerDown={onPointerDown}\n              onScrollChange={rerenderCommentIcons}\n              // renderSidebar={renderSidebar}\n            >\n              {/* {excalidrawAPI && (\n              <Footer>\n                <CustomFooter excalidrawAPI={excalidrawAPI} />\n              </Footer>\n            )}\n            {renderMenu()} */}\n            </Excalidraw>\n            {Object.keys(commentIcons || []).length > 0 && renderCommentIcons()}\n            {comment && renderComment()}\n          </div>\n          <div    onDrop={handleRightSideDivDrop} onDragOver={(event) => event.preventDefault()}>\n            {\" \"}\n            <img onDragStart={handleImageDragStart}\n              src=\"messi.png\"\n              alt=\"messi\"\n              style={{\n                height: \"200px\",\n                width: \"240px\",\n              }}\n            />\n          </div>\n        </div>\n        <button style={{background:\"/rocket.jpeg\"}} onClick={addTextElement}>Add Text Element</button>\n        {/* <div className=\"export-wrapper button-wrapper\">\n          <label className=\"export-wrapper__checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={exportWithDarkMode}\n              onChange={() => setExportWithDarkMode(!exportWithDarkMode)}\n            />\n            Export with dark mode\n          </label>\n          <label className=\"export-wrapper__checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={exportEmbedScene}\n              onChange={() => setExportEmbedScene(!exportEmbedScene)}\n            />\n            Export with embed scene\n          </label>\n          <button\n            onClick={async () => {\n              if (!excalidrawAPI) {\n                return;\n              }\n              const svg = await exportToSvg({\n                elements: excalidrawAPI?.getSceneElements(),\n                appState: {\n                  ...initialData.appState,\n                  exportWithDarkMode,\n                  exportEmbedScene,\n                  width: 300,\n                  height: 100\n                },\n                files: excalidrawAPI?.getFiles()\n              });\n              appRef.current.querySelector(\".export-svg\").innerHTML =\n                svg.outerHTML;\n            }}\n          >\n            Export to SVG\n          </button>\n          <div className=\"export export-svg\"></div>\n\n          <button\n            onClick={async () => {\n              if (!excalidrawAPI) {\n                return;\n              }\n              const blob = await exportToBlob({\n                elements: excalidrawAPI?.getSceneElements(),\n                mimeType: \"image/png\",\n                appState: {\n                  ...initialData.appState,\n                  exportEmbedScene,\n                  exportWithDarkMode\n                },\n                files: excalidrawAPI?.getFiles()\n              });\n              setBlobUrl(window.URL.createObjectURL(blob));\n            }}\n          >\n            Export to Blob\n          </button>\n          <div className=\"export export-blob\">\n            <img src={blobUrl} alt=\"\" />\n          </div>\n\n          <button\n            onClick={async () => {\n              if (!excalidrawAPI) {\n                return;\n              }\n              const canvas = await exportToCanvas({\n                elements: excalidrawAPI.getSceneElements(),\n                appState: {\n                  ...initialData.appState,\n                  exportWithDarkMode\n                },\n                files: excalidrawAPI.getFiles()\n              });\n              const ctx = canvas.getContext(\"2d\")!;\n              ctx.font = \"30px Virgil\";\n              ctx.strokeText(\"My custom text\", 50, 60);\n              setCanvasUrl(canvas.toDataURL());\n            }}\n          >\n            Export to Canvas\n          </button>\n          <div className=\"export export-canvas\">\n            <img src={canvasUrl} alt=\"\" />\n          </div>\n        </div> */}\n      </ExampleSidebar>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}